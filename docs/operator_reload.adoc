include::./.asciidoctor/.asciidoctorconfig[]

== Глава 13. Перезагрузка операторов как правильно?

=== Унарные операторы

 * `-` `(\\__neg__)` -- Унарный арифметический минус.

 * `+` `(\\__pos__)` -- Унарный арифметический плюс.

 * `~` `(\\__invert__)` -- Поразраядная инверсия целого числа, определяется как ~x == -(x+1)

Поддерживать унарные операторы легко, достаточно переопределить один из специальных методов, который принимает только один аргумент `self` и возвращающий *новый* объект.

TIP: Специальные методы, реализующие унарные операторы или инфиксные операторы не должны изменять свои операнды.

==== Оператор сложения

`\\__add__`
`\\__radd__`

==== Оператор умножения

`\\__mul__`
`\\__rmul__`

.vector_v7.py: добавлены методы оператора `*`
[source, python]
----
include::{sourcedir}/vector_v7.py[]
----


.Имена методов инфиксных операторов
|===
|Оператор |Прямой |Обратный |На месте |Описание

|`+`
|`\\__add__`
|`\\__radd__`
|`\\__iadd__`
|Сложение или конкатенация

|`-`
|`\\__sub__`
|`\\__rsub__`
|`\\__isub__`
|Вычитание

|`*`
|`\\__mul__`
|`\\__rmul__`
|`\\__imul__`
|Умножение, повторение


|`/`
|`\\__truediv__`
|`\\__rtruediv__`
|`\\__itruediv__`
|Истинное деление

|`//`
|`\\__floordiv__`
|`\\__rfloordiv__`
|`\\__ifloordiv__`
|Деление с округлением

|`%`
|`\\__mod__`
|`\\__rmod__`
|`\\__imod__`
|Деление по модулю

|`divmod()`
|`\\__divmod__`
|`\\__rdivmod__`
|`\\__idivmod__`
|Возвращает кортеж, содержащий частное и остаток

|`**, pow()`
|`\\__pow__`
|`\\__rpow__`
|`\\__ipow__`
|Возведение в степень

|`@`
|`\\__matmul__`
|`\\__rmatmul__`
|`\\__imatmul__`
|Матричное умножение (Py>=3.5)

|`&`
|`\\__and__`
|`\\__rand__`
|`\\__iand__`
|Поразрядное *И*

|`\|`
|`\\__or__`
|`\\__ror__`
|`\\__ior__`
|Поразрядное *ИЛИ*

|`^`
|`\\__xor__`
|`\\__rxor__`
|`\\__ixor__`
|Поразрядное *И*

|===

